{{/* Payment plan section */}} {{if .Payment}}
<div class="payment-plan">
  <h2 class="payment-title">Payment <span class="purple-text">Plan</span></h2>

  <!-- Total Amount Section -->
  <div class="total-amount-section">
    <div class="arrow-box total-box">
      <div class="label">Total Amount</div>
      <div class="content">
        <span class="amount"
          >{{formatCurrencyString .Payment.TotalAmount "₹"}}</span
        >
        <span class="pax-info"
          >For {{.Trip.Travelers}} Pax (Inclusive Of GST)</span
        >
      </div>
    </div>
  </div>

  <!-- TCS Section -->
  {{if .Payment.TCS}}
  <div class="tcs-section">
    <div class="arrow-box tcs-box">
      <div class="label">TCS</div>
      <div class="content">{{formatCurrencyString .Payment.TCS "₹"}}</div>
    </div>
  </div>
  {{else}}
  <div class="tcs-section">
    <div class="arrow-box tcs-box">
      <div class="label">TCS</div>
      <div class="content">Not Collected</div>
    </div>
  </div>
  {{end}}

  <!-- Payment Schedule Table -->
  <div class="payment-schedule">
    <!-- Header row with pill-style design -->
    <div class="schedule-header">
      <div class="header-pill">Installment</div>
      <div class="header-pill">Amount</div>
      <div class="header-pill">Due Date</div>
    </div>

    <!-- Data rows -->
    <div class="schedule-data">
      {{range $index, $installment := .Payment.Installments}}
      <div class="schedule-row">
        <div class="data-cell installment-cell">
          Installment {{add $index 1}}
        </div>
        <div class="data-cell amount-cell">
          {{formatCurrencyString .Amount "₹"}}
        </div>
        <div class="data-cell date-cell">{{.DueDate}}</div>
      </div>
      {{end}}
    </div>
  </div>
</div>
{{end}}

<style>
  @media print {
    .payment-plan {
      margin-bottom: 30px;
      page-break-inside: avoid;
    }

    .payment-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      color: #000;
    }

    .purple-text {
      color: #7b2cbf;
    }

    /* Arrow box styles */
    .total-amount-section,
    .tcs-section {
      margin-bottom: 15px;
    }

    .arrow-box {
      display: flex;
      align-items: center;
      background-color: #f5e6ff;
      border: 1px solid #e0b3ff;
      border-radius: 15px;
      padding: 15px 20px;
      position: relative;
      min-height: 50px;
    }

    .arrow-box .label {
      background-color: #7b2cbf;
      color: white;
      padding: 8px 16px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 14px;
      margin-right: 20px;
      min-width: 120px;
      text-align: center;
    }

    .arrow-box .content {
      flex: 1;
      font-size: 16px;
      font-weight: 600;
      color: #333;
    }

    .total-box .content .amount {
      font-size: 20px;
      font-weight: bold;
      color: #000;
      margin-right: 10px;
    }

    .total-box .content .pax-info {
      font-size: 14px;
      color: #666;
      font-weight: normal;
    }

    /* Payment Schedule Table */
    .payment-schedule {
      margin-top: 20px;
    }

    .schedule-header {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 8px;
      margin-bottom: 0;
    }

    .schedule-header .header-pill {
      background-color: #7b2cbf;
      color: white;
      padding: 12px 20px;
      border-radius: 25px;
      text-align: center;
      font-weight: 600;
      font-size: 14px;
      font-family: Arial, sans-serif;
    }

    .schedule-data {
      background-color: #f5e6ff;
      border-radius: 0 0 15px 15px;
      padding: 0;
    }

    .schedule-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 8px;
      padding: 12px 8px;
      align-items: center;
    }

    .schedule-row:nth-child(even) {
      background-color: #f0d9ff;
    }

    .schedule-row:nth-child(odd) {
      background-color: #f5e6ff;
    }

    .schedule-row:first-child {
      border-radius: 15px 15px 0 0;
    }

    .schedule-row:last-child {
      border-radius: 0 0 15px 15px;
    }

    .data-cell {
      padding: 8px 12px;
      font-size: 14px;
      color: #333;
      text-align: center;
      font-family: Arial, sans-serif;
    }

    .installment-cell {
      font-weight: 500;
    }

    .amount-cell {
      font-weight: 600;
      color: #000;
    }

    .date-cell {
      font-weight: 400;
    }
  }
</style>
